import{f as h,i as m}from"./chunk-HTGQ6DLF.js";import E from"htm";function g(n){let e=h(n);c.length>0&&c[c.length-1]?.push(e)}var d=[];function N(n,e){if(d.length===0)throw new Error("setContext must be called within a component");d[d.length-1]?.set(n,e)}function F(n){for(let e=d.length-1;e>=0;e--)if(d[e]?.has(n))return d[e]?.get(n);throw new Error("Context not found for key")}var c=[];function M(n){if(c.length===0)throw new Error("onMount must be called within a component");queueMicrotask(()=>{let e=n();e&&w(e)})}function w(n){if(c.length===0)throw new Error("onUnmount must be called within a component");c[c.length-1]?.push(n)}function v(n,e,...i){if(typeof n=="function"){let{node:r}=x(n,e,i);return r}let o=document.createElement(n);if(e){for(let[r,t]of Object.entries(e))if(r!=="children")if(r.startsWith("on")){let s=r.slice(2).toLowerCase();o.addEventListener(s,t)}else r==="style"&&typeof t=="object"?Object.assign(o.style,t):r==="use"&&typeof t=="function"?t(o):typeof t=="function"?C(o,r,()=>t()):m(t)?C(o,r,()=>t.value):o.setAttribute(r,t)}let a=e?.children?Array.isArray(e.children)?e.children:[e.children]:[];a.push(...i);for(let r of a)l(o,r);return o}function C(n,e,i){g(()=>{let o=i();return o===!1||o==null?n.removeAttribute(e):n.setAttribute(e,String(o)),()=>{n.removeAttribute(e)}})}function l(n,e,i){Array.isArray(e)?e.forEach(o=>l(n,o,i)):typeof e=="function"?y(n,()=>e()):m(e)?y(n,()=>e.value):e&&typeof e=="object"&&"node"in e&&"dispose"in e?(n.appendChild(e.node),i?i.push(e.dispose):c.length>0&&c[c.length-1]?.push(e.dispose)):e instanceof Node?n.appendChild(e):e!=null&&n.appendChild(document.createTextNode(String(e)))}function y(n,e){let i=document.createComment("start"),o=document.createComment("end");n.appendChild(i),n.appendChild(o),g(()=>{let a=e();console.log("new child content value:",a);let r=[],t=[],s=document.createDocumentFragment();return l(s,a,t),r=Array.from(s.childNodes),o.parentNode.insertBefore(s,o),console.log("new child content nodes:",r),()=>{let f=document.createRange();f.setStartAfter(i),f.setEndBefore(o),f.deleteContents(),t.forEach(u=>u())}})}function x(n,e,i){let o=new Map;d.push(o);let a=[],r=c[c.length-1];c.push(a);let t=n(e,i),s=document.createDocumentFragment();Array.isArray(t)?t.forEach(p=>{l(s,p)}):t instanceof Node?s.appendChild(t):t!=null?s.appendChild(document.createTextNode(String(t))):s.appendChild(document.createComment(""));let f=!1,u=()=>{if(f)return console.warn("Component already unmounted");for(let p of a)p();d.pop(),c.pop(),f=!0};return r&&r.push(u),{node:s,dispose:u}}function S(n,e){let{node:i,dispose:o}=x(n,null,[]),a=document.createComment("start of component"),r=document.createComment("end of component");e.appendChild(a),e.appendChild(i),e.appendChild(r);let t=!1;return()=>{if(t)return console.warn("Render root already unmounted");let s=document.createRange();s.setStartAfter(a),s.setEndBefore(r),s.deleteContents(),e.removeChild(a),e.removeChild(r),o(),t=!0}}var D=E.bind(v);export{N as a,F as b,M as c,w as d,v as e,S as f,D as g};
