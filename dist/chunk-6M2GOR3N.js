import{f as h,i as p}from"./chunk-VK6CCJ5H.js";import w from"htm";function g(t){let e=h(t);a.length>0&&a[a.length-1]?.push(e)}var c=[];function F(t,e){if(c.length===0)throw new Error("setContext must be called within a component");c[c.length-1]?.set(t,e)}function M(t){for(let e=c.length-1;e>=0;e--)if(c[e]?.has(t))return c[e]?.get(t);throw new Error("Context not found for key")}var a=[];function N(t){if(a.length===0)throw new Error("onMount must be called within a component");queueMicrotask(()=>{let e=t();e&&E(e)})}function E(t){if(a.length===0)throw new Error("onUnmount must be called within a component");a[a.length-1]?.push(t)}function v(t,e,...i){if(typeof t=="function"){let{node:r}=x(t,e,i);return r}let o=document.createElement(t);if(e){for(let[r,n]of Object.entries(e))if(r!=="children")if(r.startsWith("on")){let s=r.slice(2).toLowerCase();o.addEventListener(s,n)}else r==="style"&&typeof n=="object"?Object.assign(o.style,n):r==="use"&&typeof n=="function"?n(o):typeof n=="function"?C(o,r,()=>n()):p(n)?C(o,r,()=>n.value):o.setAttribute(r,n)}let f=e?.children?Array.isArray(e.children)?e.children:[e.children]:[];f.push(...i);for(let r of f)d(o,r);return o}function C(t,e,i){g(()=>{let o=i();return o===!1||o==null?t.removeAttribute(e):t.setAttribute(e,String(o)),()=>{t.removeAttribute(e)}})}function d(t,e,i){Array.isArray(e)?e.forEach(o=>d(t,o,i)):typeof e=="function"?y(t,()=>e()):p(e)?y(t,()=>e.value):e&&typeof e=="object"&&"node"in e&&"dispose"in e?(t.appendChild(e.node),i?i.push(e.dispose):a.length>0&&a[a.length-1]?.push(e.dispose)):e instanceof Node?t.appendChild(e):e!=null&&t.appendChild(document.createTextNode(String(e)))}function y(t,e){let i=document.createComment("start"),o=document.createComment("end");t.appendChild(i),t.appendChild(o),g(()=>{let f=e(),r=[],n=document.createDocumentFragment();return d(n,f,r),o.parentNode.insertBefore(n,o),()=>{let s=document.createRange();s.setStartAfter(i),s.setEndBefore(o),s.deleteContents(),r.forEach(u=>u())}})}function x(t,e,i){let o=new Map;c.push(o);let f=[],r=a[a.length-1];a.push(f);let n=t(e,i),s=document.createDocumentFragment();Array.isArray(n)?n.forEach(l=>{d(s,l)}):n instanceof Node?s.appendChild(n):n!=null?s.appendChild(document.createTextNode(String(n))):s.appendChild(document.createComment(""));let u=!1,m=()=>{if(u)return console.warn("Component already unmounted");for(let l of f)l();c.pop(),a.pop(),u=!0};return r&&r.push(m),{node:s,dispose:m}}function S(t,e){let{node:i,dispose:o}=x(t,null,[]),f=document.createComment("start of component"),r=document.createComment("end of component");e.appendChild(f),e.appendChild(i),e.appendChild(r);let n=!1;return()=>{if(n)return console.warn("Render root already unmounted");let s=document.createRange();s.setStartAfter(f),s.setEndBefore(r),s.deleteContents(),e.removeChild(f),e.removeChild(r),o(),n=!0}}var D=w.bind(v);export{F as a,M as b,N as c,E as d,v as e,S as f,D as g};
