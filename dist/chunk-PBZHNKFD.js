import{f as h,i as m}from"./chunk-5COWCBSM.js";import w from"htm";function g(n){let e=h(n);i.length>0&&i[i.length-1]?.push(e)}var c=[];function F(n,e){if(c.length===0)throw new Error("setContext must be called within a component");c[c.length-1]?.set(n,e)}function M(n){for(let e=c.length-1;e>=0;e--)if(c[e]?.has(n))return c[e]?.get(n);throw new Error("Context not found for key")}var i=[];function N(n){if(i.length===0)throw new Error("onMount must be called within a component");queueMicrotask(()=>{let e=n();e&&E(e)})}function E(n){if(i.length===0)throw new Error("onUnmount must be called within a component");i[i.length-1]?.push(n)}function v(n,e,...s){if(typeof n=="function"){let{node:r}=x(n,e,s);return r}let o=document.createElement(n);if(e){for(let[r,t]of Object.entries(e))if(r!=="children")if(r.startsWith("on")){let a=r.slice(2).toLowerCase();o.addEventListener(a,t)}else r==="style"&&typeof t=="object"?Object.assign(o.style,t):r==="use"&&typeof t=="function"?t(o):typeof t=="function"?C(o,r,()=>t()):m(t)?C(o,r,()=>t.value):o.setAttribute(r,t)}let f=e?.children?Array.isArray(e.children)?e.children:[e.children]:[];f.push(...s);for(let r of f)l(o,r);return o}function C(n,e,s){g(()=>{let o=s();return o===!1||o==null?n.removeAttribute(e):n.setAttribute(e,String(o)),()=>{n.removeAttribute(e)}})}function l(n,e,s){Array.isArray(e)?e.forEach(o=>l(n,o,s)):typeof e=="function"?y(n,()=>e()):m(e)?y(n,()=>e.value):e&&typeof e=="object"&&"node"in e&&"dispose"in e?(n.appendChild(e.node),s?s.push(e.dispose):i.length>0&&i[i.length-1]?.push(e.dispose)):e instanceof Node?n.appendChild(e):e!=null&&n.appendChild(document.createTextNode(String(e)))}function y(n,e){let s=document.createComment("start"),o=document.createComment("end");n.appendChild(s),n.appendChild(o),g(()=>{let f=[];i.push(f);let r=e(),t=[],a=document.createDocumentFragment();return l(a,r,t),o.parentNode.insertBefore(a,o),()=>{let u=document.createRange();u.setStartAfter(s),u.setEndBefore(o),u.deleteContents(),t.forEach(d=>d());for(let d of f)d();i.pop()}})}function x(n,e,s){let o=new Map;c.push(o);let f=[],r=i[i.length-1];i.push(f);let t=n(e,s),a=document.createDocumentFragment();Array.isArray(t)?t.forEach(p=>{l(a,p)}):t instanceof Node?a.appendChild(t):t!=null?a.appendChild(document.createTextNode(String(t))):a.appendChild(document.createComment(""));let u=!1,d=()=>{if(u)return console.warn("Component already unmounted");for(let p of f)p();c.pop(),i.pop(),u=!0};return r&&r.push(d),{node:a,dispose:d}}function S(n,e){let{node:s,dispose:o}=x(n,null,[]),f=document.createComment("start of component"),r=document.createComment("end of component");e.appendChild(f),e.appendChild(s),e.appendChild(r);let t=!1;return()=>{if(t)return console.warn("Render root already unmounted");let a=document.createRange();a.setStartAfter(f),a.setEndBefore(r),a.deleteContents(),e.removeChild(f),e.removeChild(r),o(),t=!0}}var D=w.bind(v);export{F as a,M as b,N as c,E as d,v as e,S as f,D as g};
