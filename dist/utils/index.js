import{c as l,d}from"../chunk-XBDAQS5M.js";function u(n){let e=0,o=null,t=l(void 0);return{map(r){return f(this,r)},filter(r){return b(this,r)},subscribe(r){e++,e===1&&(o=n(s=>{t.set(s)}));let i=t.subscribe(s=>{s!==void 0&&r(s)});return()=>{i(),e--,e===0&&o&&(o(),o=null,t.set(void 0))}},toSignal(){return t}}}function y(n,e){return u(o=>{let t=r=>o(r);return n.addEventListener(e,t),()=>{n.removeEventListener(e,t)}})}function f(n,e){return u(o=>n.subscribe(r=>{o(e(r))}))}function b(n,e){return u(o=>n.subscribe(r=>{e(r)&&o(r)}))}var c={storage:globalThis.localStorage,toStorage:JSON.stringify,fromStorage:JSON.parse};function p(n,e,o){let{storage:t,toStorage:r,fromStorage:i}={...c,...o};if(!t)return console.warn("No storage available, using regular signal",n),l(e);let s=t.getItem(n),a=l(s?i(s):e);return d(()=>{let T=r(a.value),g=i(t.getItem(n));T!==g&&t.setItem(n,T)}),a}function v(n,e,o=!1){let t=n.peek(),r=typeof e=="function"?e(t):e;if(typeof r!="object"||r===null)return n.set(r);{let s={...t,...r};return n.set(s),o?m(t,s):void 0}}function m(n,e){let o=Reflect.ownKeys(n),t=Reflect.ownKeys(e),r=t.filter(a=>!o.includes(a)),i=o.filter(a=>!t.includes(a)),s=o.filter(a=>n[a]!==e[a]);return[...r,...i,...s]}export{b as filter,y as fromDomEvent,f as map,u as observable,p as persistedSignal,v as update};
