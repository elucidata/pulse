import{f as C,i as g}from"./chunk-AT6GGCDO.js";import A from"htm";var u=[];function F(n,e){if(u.length===0)throw new Error("setContext must be called within a component");u[u.length-1]?.set(n,e)}function S(n){for(let e=u.length-1;e>=0;e--)if(u[e]?.has(n))return u[e]?.get(n);throw new Error("Context not found for key")}var i=[];function T(n){if(i.length===0)throw new Error("onMount must be called within a component");queueMicrotask(()=>{let e=n();e&&b(e)})}function b(n){if(i.length===0)throw new Error("onUnmount must be called within a component");i[i.length-1]?.push(n)}function N(n,e,...a){if(typeof n=="function"){let{node:o}=w(n,e,a);return o}let r=document.createElement(n);if(e){for(let[o,t]of Object.entries(e))if(o!=="children")if(o.startsWith("on")){let c=o.slice(2).toLowerCase();r.addEventListener(c,t)}else o==="style"&&typeof t=="object"?Object.assign(r.style,t):o==="use"&&typeof t=="function"?t(r):typeof t=="function"?v(r,o,()=>t()):g(t)?v(r,o,()=>t.value):r.setAttribute(o,t)}let s=e?.children?Array.isArray(e.children)?e.children:[e.children]:[];s.push(...a);for(let o of s)m(r,o);return r}function v(n,e,a){let r=C(()=>{let s=a();s===!1||s==null?n.removeAttribute(e):n.setAttribute(e,String(s))});i.length>0&&i[i.length-1]?.push(r)}function m(n,e){Array.isArray(e)?e.forEach(a=>m(n,a)):typeof e=="function"?x(n,e,()=>e()):g(e)?x(n,e,()=>e.value):e&&typeof e=="object"&&"node"in e&&"dispose"in e?(n.appendChild(e.node),i.length>0&&i[i.length-1]?.push(e.dispose)):e instanceof Node?n.appendChild(e):e!=null&&n.appendChild(document.createTextNode(String(e)))}function x(n,e,a){let r=document.createComment("start"),s=document.createComment("end");n.appendChild(r),n.appendChild(s);let o=C(()=>{let t=a(),c=document.createRange();c.setStartAfter(r),c.setEndBefore(s),c.deleteContents();let f;t instanceof Node?f=[t]:Array.isArray(t)?(f=[],t.forEach(d=>{let p=document.createDocumentFragment();m(p,d),f.push(...Array.from(p.childNodes))})):t!=null?f=[document.createTextNode(String(t))]:f=[],f.forEach(d=>{s.parentNode.insertBefore(d,s)})});i.length>0&&i[i.length-1]?.push(o)}function w(n,e,a){let r=new Map;u.push(r);let s=[],o=i[i.length-1];i.push(s);let t=n(e,a),c;if(Array.isArray(t)){let l=document.createDocumentFragment();t.forEach(y=>{m(l,y)}),c=l}else t instanceof Node?c=t:t!=null?c=document.createTextNode(String(t)):c=document.createComment("");let f=document.createComment(""),d=document.createDocumentFragment();d.appendChild(f),d.appendChild(c);let p=new MutationObserver(l=>{for(let y of l)y.removedNodes.forEach(E=>{E===f&&h()})});queueMicrotask(()=>{f.parentNode&&p.observe(f.parentNode,{childList:!0})});let h=()=>{p.disconnect();for(let l of s)l();u.pop(),i.pop()};return o&&o.push(h),{node:d,dispose:h}}function L(n,e){let{node:a,dispose:r}=w(n,null,[]),s=Array.from(a.childNodes);e.appendChild(a);let o=!1;return()=>{if(o)return console.warn("Component already unmounted");s.forEach(t=>{e.contains(t)&&e.removeChild(t),r(),o=!0})}}var O=A.bind(N);export{F as a,S as b,T as c,b as d,N as e,L as f,O as g};
